<header id="main-header">
    <nav class="navbar navbar-nav navbar-dark navbar-expand-lg fixed-top py-0 {{class}}">
        <div class="container container-lg position-relative">
            <div class="navbar-brand">
                {{#if @site.logo}}
                    <a class="navbar-brand logo" href="{{@site.url}}">
                        <img height="32" src="{{@site.logo}}" alt="{{@site.title}}"/>
                    </a>
                {{else}}
                    <a class="navbar-brand" href="{{@site.url}}">{{@site.title}}</a>
                {{/if}}
            </div>
            <div class="order-lg-last d-flex align-items-center py-3 py-lg-0">
                {{#if @labs.members}}
                    <div class="d-none d-md-block">
                        <a class="btn btn-info text-nowrap text-light" href="#subscribe">Subscribe</a>
                    </div>
                {{/if}}
                <button type="button" class="navbar-toggler collapsed ms-2" data-bs-toggle="collapse"
                        data-bs-target="#navbar-collapse-toggle" aria-expanded="false">
                    <span class="navbar-toggler-icon"></span>
                </button>
            </div>
            <div class="navbar-collapse collapse" id="navbar-collapse-toggle">
                <ul class="nav navbar-nav m-auto">

                    {{navigation}}

                    {{>mega-menu}}
                </ul>
            </div>
        </div>
    </nav>
</header>

{{#contentFor "scripts"}}
    <script>
        (function () {
            "use strict";

            var header = document.getElementById('main-header');
            window.addEventListener('scroll', function () {
                if (window.scrollY > 50) {
                    header.children[0].classList.add('bg-primary');
                    header.classList.add('fixed-header');
                } else {
                    header.children[0].classList.remove('bg-primary');
                    header.classList.remove('fixed-header');
                }
            });

            document.querySelectorAll('#main-header a.nav-link').forEach(function (element) {
                var href = element.getAttribute('href');
                if (href && href.endsWith('#pages')) {
                    element.classList.add('dropdown-toggle')
                    element.classList.add('mm-in')
                    element.classList.add('mm-mega');
                    element.setAttribute('data-bs-target', '#megaMenu');
                    element.setAttribute('data-bs-toggle', 'collapse');
                }
            });
        })();
    </script>
{{/contentFor}}
